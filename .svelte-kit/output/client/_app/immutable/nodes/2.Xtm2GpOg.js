var bt=Object.defineProperty;var xt=(l,e,t)=>e in l?bt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var ke=(l,e,t)=>xt(l,typeof e!="symbol"?e+"":e,t);import{N as yt,S as Be,b as De,s as Ne,n as ie,d as _,c as G,v as u,f,O as D,h,C as qe,o as kt,j as wt,r as ye,P as re,z as ue,q as o,Q as U,g as T,A as W,w as q,F as Ie,B as Y,y as I,R as Ct,T as Tt,U as tt,J as ze,t as Le,l as Oe,L as Re,M as Ve,K as Fe}from"../chunks/CuXZQ5wZ.js";import"../chunks/IHki7fMi.js";import{w as Ge,d as Ce}from"../chunks/BRHkLRMZ.js";function lt(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}const Ue={STARTING_PX:30,BASE_GENERATION_RATE:1,DOMINANCE_THRESHOLD:.25},vt={TERRITORY_GRAY:"#6b7280"},O={1:8,2:16,3:32,4:64,5:128},Pt=typeof window<"u"?`ws://${window.location.hostname}:8080`:"ws://localhost:8080";class Et{constructor(){ke(this,"ws",null);ke(this,"connectionState",Ge("disconnected"));ke(this,"pixelUpdateCallbacks",new Set);ke(this,"buildingPlacedCallbacks",new Set);this.connect()}connect(){this.connectionState.set("connecting"),this.ws=new WebSocket(Pt),this.ws.onopen=()=>{var e;console.log("WebSocket connected"),this.connectionState.set("connected"),this.send({type:"player_join",payload:{playerId:((e=yt(fe))==null?void 0:e.id)||"anonymous"}})},this.ws.onmessage=e=>{const t=JSON.parse(e.data);this.handleMessage(t)},this.ws.onclose=e=>{console.log("WebSocket disconnected:",e.code,e.reason),this.connectionState.set("disconnected"),setTimeout(()=>this.connect(),3e3)},this.ws.onerror=e=>{var t;console.error("WebSocket error:",e),this.connectionState.set("error"),(t=this.ws)==null||t.close()}}handleMessage(e){switch(e.type){case"world_state":console.log("Initial world state received:",e.payload),xe.set(e.payload);break;case"pixel_update":const t=e.payload;ve.updateTile(t.tile_id,{color:t.color,opacity:t.opacity}),this.pixelUpdateCallbacks.forEach(i=>i(t));break;case"building_placed":const s=e.payload;ve.addBuilding(s.owner_id,s),this.buildingPlacedCallbacks.forEach(i=>i(s));break;case"player_update":ve.updateResources(e.payload.playerId,e.payload.resources);break;case"error":console.error("Server error:",e.payload);break;default:console.warn("Unknown message type:",e.type,e.payload)}}send(e){var t;((t=this.ws)==null?void 0:t.readyState)===WebSocket.OPEN?this.ws.send(JSON.stringify(e)):console.warn("WebSocket not open. Message not sent:",e)}sendPixelUpdate(e,t,s){this.send({type:"pixel_update",payload:{tile_id:e,color:t,opacity:s}})}sendBuildingPlacement(e){this.send({type:"building_placement",payload:e})}onPixelUpdate(e){return this.pixelUpdateCallbacks.add(e),()=>this.pixelUpdateCallbacks.delete(e)}onBuildingPlaced(e){return this.buildingPlacedCallbacks.add(e),()=>this.buildingPlacedCallbacks.delete(e)}}const St=new Et;function mt(){return St}const fe=Ge(null),xe=Ge({players:new Map,tiles:new Map,alliances:new Map,buildings:new Map,victory_threshold:Ue.DOMINANCE_THRESHOLD,last_update:Date.now()}),de=Ge({selected_tool:"territory",selected_color:vt.TERRITORY_GRAY,zoom_level:8,cooldowns:new Map,show_grid:!0,show_alliances:!0});mt().connectionState;Ce(fe,l=>(l==null?void 0:l.resources)??{px:0,exp:0,apx:0});Ce(fe,l=>(l==null?void 0:l.owned_territories.size)??0);Ce(fe,l=>(l==null?void 0:l.buildings.length)??0);Ce(fe,l=>Array.from((l==null?void 0:l.palette.colors)??[]));Ce([fe,de],([l,e])=>!l||e.selected_tool!=="building"?!1:l.resources.px>=9);const ve={initializePlayer(l,e="default"){const t={id:l,faction_id:e,resources:{px:Ue.STARTING_PX,exp:0,apx:0},palette:{colors:new Set([vt.TERRITORY_GRAY,"#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#f97316"])},owned_territories:new Set,buildings:[],tech_level:1,alliances:new Set,generation_rate:Ue.BASE_GENERATION_RATE,storage_capacity:100,last_tick:Date.now()};fe.set(t),xe.update(s=>({...s,players:new Map(s.players).set(l,t)}))},updateResources(l,e){fe.update(t=>!t||t.id!==l?t:{...t,resources:{...t.resources,...e}}),xe.update(t=>{const s=new Map(t.players),i=s.get(l);return i&&s.set(l,{...i,resources:{...i.resources,...e}}),{...t,players:s}})},addTerritory(l,e){fe.update(t=>{if(!t||t.id!==l)return t;const s=new Set(t.owned_territories);return s.add(e),{...t,owned_territories:s}})},updateTile(l,e){xe.update(t=>{const s=new Map(t.tiles),i=s.get(l);return s.set(l,{...i,...e}),{...t,tiles:s}})},addBuilding(l,e){fe.update(t=>!t||t.id!==l?t:{...t,buildings:[...t.buildings,e]}),xe.update(t=>({...t,buildings:new Map(t.buildings).set(e.id,e)}))},setSelectedTool(l){de.update(e=>({...e,selected_tool:l}))},setSelectedColor(l){de.update(e=>({...e,selected_color:l}))},setSelectedBuilding(l){de.update(e=>({...e,selected_building:l,selected_tool:"building"}))},setZoomLevel(l){de.update(e=>({...e,zoom_level:l}))},setCooldown(l,e){de.update(t=>({...t,cooldowns:new Map(t.cooldowns).set(l,e)}))},removeCooldown(l){de.update(e=>{const t=new Map(e.cooldowns);return t.delete(l),{...e,cooldowns:t}})},toggleGrid(){de.update(l=>({...l,show_grid:!l.show_grid}))},toggleAlliances(){de.update(l=>({...l,show_alliances:!l.show_alliances}))}};function we(l){return`${l.lat_idx}_${l.lon_idx}`}function At(l){let e,t="";return{c(){e=h("div"),e.innerHTML=t,this.h()},l(s){e=f(s,"DIV",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1sjfu5l"&&(e.innerHTML=t),this.h()},h(){u(e,"class","w-full h-full relative bg-gray-800 overflow-hidden cursor-crosshair")},m(s,i){G(s,e,i),l[1](e)},p:ie,i:ie,o:ie,d(s){s&&_(e),l[1](null)}}}const qt=.1,It=20,se=16;function Mt(l,e,t){let s,i;qe(l,de,y=>t(18,s=y)),qe(l,xe,y=>t(19,i=y));let n,r,a,k,c,d,b,A;try{A=mt()}catch(y){console.warn("WebSocket initialization failed:",y),A={subscribeTiles:()=>{},sendPixelUpdate:()=>{},onPixelUpdate:()=>()=>{}}}let w=0,g=0,p=1,x=!1,P=!1,v=null,m=null,C=0,E=0;kt(()=>{N(),J(),requestAnimationFrame(oe),w=-n.clientWidth/2,g=-n.clientHeight/2;for(let y=-10;y<10;y++)for(let S=-10;S<10;S++){const M=we({lat_idx:y,lon_idx:S}),L=(y+S)%2===0?"#222":"#333";ve.updateTile(M,{lat_idx:y,lon_idx:S,type:"territory",color:L,opacity:1})}});function N(){r=document.createElement("canvas"),k=document.createElement("canvas"),d=document.createElement("canvas"),n.appendChild(r),n.appendChild(k),n.appendChild(d),a=r.getContext("2d"),c=k.getContext("2d"),b=d.getContext("2d"),ce()}function ce(){const y=n.getBoundingClientRect();[r,k,d].forEach(S=>{S.width=y.width,S.height=y.height,S.style.position="absolute",S.style.top="0",S.style.left="0"}),a.imageSmoothingEnabled=!1,c.imageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1}function J(){n.addEventListener("pointerdown",R),n.addEventListener("pointermove",$),n.addEventListener("pointerup",X),n.addEventListener("pointerleave",K),n.addEventListener("wheel",ne)}function R(y){if(y.button===0){if(s.selected_tool==="territory"){x=!0;const S=H(y.offsetX,y.offsetY);z(S,s.selected_color),v=we(S)}}else y.button===1&&(P=!0);C=y.clientX,E=y.clientY}function $(y){const S=H(y.offsetX,y.offsetY);if(m=S,P){const M=y.clientX-C,L=y.clientY-E;w+=M,g+=L,C=y.clientX,E=y.clientY;return}if(x&&s.selected_tool==="territory"){const M=we(S);v!==M&&(z(S,s.selected_color),v=M)}}function X(y){x=!1,P=!1,v=null}function K(){x=!1,P=!1,v=null,m=null}function ne(y){y.preventDefault();const S=y.deltaY>0?.9:1.1,M=Math.max(qt,Math.min(It,p*S)),L=y.offsetX,V=y.offsetY;w=L-(L-w)*(M/p),g=V-(V-g)*(M/p),p=M}function z(y,S){const M=we(y);A.sendPixelUpdate(M,S,1),ve.updateTile(M,{...y,type:"territory",color:S,opacity:1})}function H(y,S){const M=(y-w)/p,L=(S-g)/p,V=Math.floor(M/se);return{lat_idx:Math.floor(L/se),lon_idx:V}}function oe(){le(),F(),p>4&&ae(),pe(),requestAnimationFrame(oe)}function le(){a.clearRect(0,0,r.width,r.height),c.clearRect(0,0,k.width,k.height),b.clearRect(0,0,d.width,d.height)}function F(){a.save(),a.translate(w,g),a.scale(p,p);const y=H(0,0),S=H(r.width,r.height);for(let M=y.lat_idx-1;M<=S.lat_idx+1;M++)for(let L=y.lon_idx-1;L<=S.lon_idx+1;L++){const V=we({lat_idx:M,lon_idx:L}),j=i.tiles.get(V);j&&(a.fillStyle=j.color,a.fillRect(L*se,M*se,se,se))}a.restore()}function ae(){c.save(),c.translate(w,g),c.scale(p,p);const y=se,S=Math.floor(-w/(y*p))*y,M=Math.floor(-g/(y*p))*y,L=S+n.clientWidth/p,V=M+n.clientHeight/p;c.strokeStyle="rgba(255, 255, 255, 0.1)",c.lineWidth=1/p;for(let j=S;j<L;j+=y)c.beginPath(),c.moveTo(j,M),c.lineTo(j,V),c.stroke();for(let j=M;j<V;j+=y)c.beginPath(),c.moveTo(S,j),c.lineTo(L,j),c.stroke();c.restore()}function pe(){if(!m)return;b.save(),b.translate(w,g),b.scale(p,p);const y=m.lon_idx*se,S=m.lat_idx*se;s.selected_tool==="territory"&&(b.fillStyle=s.selected_color,b.globalAlpha=.7,b.fillRect(y,S,se,se),b.globalAlpha=1),b.strokeStyle="#ffffff",b.lineWidth=2/p,b.strokeRect(y,S,se,se),b.strokeStyle="#000000",b.lineWidth=1/p,b.strokeRect(y,S,se,se),b.restore()}A.onPixelUpdate(y=>{console.log("Pixel update received:",y)});function he(y){wt[y?"unshift":"push"](()=>{n=y,t(0,n)})}return[n,he]}let Bt=class extends Be{constructor(e){super(),De(this,e,Mt,At,Ne,{},null,[-1,-1])}};const Dt={Base:{kind:"Base",size:{width:6,height:6},cost_px:36,min_colors_required:2,effects:{passive:{px_cap:200}},prerequisites:{tech_tier:1,deps:[]}},GenPx:{kind:"GenPx",size:{width:3,height:3},cost_px:9,min_colors_required:O[1],effects:{on_tick:{px_rate:1}},prerequisites:{tech_tier:1,deps:["Base"]}},Storage:{kind:"Storage",size:{width:3,height:3},cost_px:9,min_colors_required:O[1],effects:{passive:{px_cap:100}},prerequisites:{tech_tier:1,deps:["Base"]}},ColorFactory:{kind:"ColorFactory",size:{width:3,height:3},cost_px:9,min_colors_required:O[1],effects:{on_place:{palette_colors:1}},prerequisites:{tech_tier:1,deps:["Base"]}},Science:{kind:"Science",size:{width:5,height:5},cost_px:25,min_colors_required:O[1],effects:{passive:{enables_research:!0}},prerequisites:{tech_tier:1,deps:["Base"]}},EXP_Mine:{kind:"EXP_Mine",size:{width:4,height:4},cost_px:16,min_colors_required:O[1],effects:{on_tick:{exp_rate:1}},prerequisites:{tech_tier:1,deps:["Base"]}},PX2EXP:{kind:"PX2EXP",size:{width:3,height:3},cost_px:9,min_colors_required:O[1],effects:{active:{convert:"10px->1exp"}},prerequisites:{tech_tier:1,deps:["Base"]}},EXP2PX:{kind:"EXP2PX",size:{width:3,height:3},cost_px:9,min_colors_required:O[1],effects:{active:{convert:"1exp->8px"}},prerequisites:{tech_tier:1,deps:["Base"]}},AntiPxGen:{kind:"AntiPxGen",size:{width:4,height:4},cost_px:16,min_colors_required:O[1],effects:{on_tick:{apx_rate:1}},prerequisites:{tech_tier:1,deps:["Base"]}},Board:{kind:"Board",size:{width:3,height:3},cost_px:9,min_colors_required:O[1],effects:{active:{post_message:!0}},prerequisites:{tech_tier:1,deps:["Base"]}},AdvGenPx:{kind:"AdvGenPx",size:{width:4,height:4},cost_px:25,min_colors_required:O[2],effects:{on_tick:{px_rate:3}},prerequisites:{tech_tier:2,deps:["GenPx"]}},MegaStorage:{kind:"MegaStorage",size:{width:5,height:5},cost_px:36,min_colors_required:O[2],effects:{passive:{px_cap:500}},prerequisites:{tech_tier:2,deps:["Storage"]}},PigmentFactory:{kind:"PigmentFactory",size:{width:4,height:4},cost_px:20,min_colors_required:O[2],effects:{on_place:{palette_colors:3}},prerequisites:{tech_tier:2,deps:["ColorFactory"]}},Academy:{kind:"Academy",size:{width:6,height:6},cost_px:49,min_colors_required:O[2],effects:{passive:{research_speed:2}},prerequisites:{tech_tier:2,deps:["Science"]}},CentralDepot:{kind:"CentralDepot",size:{width:7,height:7},cost_px:64,min_colors_required:O[3],effects:{passive:{px_cap:1500}},prerequisites:{tech_tier:3,deps:["MegaStorage"]}},AlchemyLab:{kind:"AlchemyLab",size:{width:5,height:5},cost_px:36,min_colors_required:O[3],effects:{on_place:{palette_colors:8}},prerequisites:{tech_tier:3,deps:["PigmentFactory"]}},GlobalInstitute:{kind:"GlobalInstitute",size:{width:8,height:8},cost_px:81,min_colors_required:O[3],effects:{passive:{research_speed:5}},prerequisites:{tech_tier:3,deps:["Academy"]}},CrystalExpMine:{kind:"CrystalExpMine",size:{width:6,height:6},cost_px:49,min_colors_required:O[3],effects:{on_tick:{exp_rate:5}},prerequisites:{tech_tier:3,deps:["EXP_Mine"]}},AntiPxLab:{kind:"AntiPxLab",size:{width:5,height:5},cost_px:36,min_colors_required:O[3],effects:{on_tick:{apx_rate:3}},prerequisites:{tech_tier:3,deps:["AntiPxGen"]}},QuantumPxFactory:{kind:"QuantumPxFactory",size:{width:8,height:8},cost_px:100,min_colors_required:O[4],effects:{on_tick:{px_rate:15}},prerequisites:{tech_tier:4,deps:["CentralDepot"]}},ColossalColorLab:{kind:"ColossalColorLab",size:{width:7,height:7},cost_px:81,min_colors_required:O[4],effects:{on_place:{palette_colors:20}},prerequisites:{tech_tier:4,deps:["AlchemyLab"]}},AbsoluteArchive:{kind:"AbsoluteArchive",size:{width:10,height:10},cost_px:144,min_colors_required:O[4],effects:{passive:{research_speed:10}},prerequisites:{tech_tier:4,deps:["GlobalInstitute"]}},ChaosTower:{kind:"ChaosTower",size:{width:6,height:6},cost_px:64,min_colors_required:O[4],effects:{on_tick:{apx_rate:8}},prerequisites:{tech_tier:4,deps:["AntiPxLab"]}},WorldFortress:{kind:"WorldFortress",size:{width:12,height:12},cost_px:256,min_colors_required:O[5],effects:{passive:{px_cap:1e4},on_tick:{px_rate:25}},prerequisites:{tech_tier:5,deps:["QuantumPxFactory"]}},CentralAI:{kind:"CentralAI",size:{width:15,height:15},cost_px:400,min_colors_required:O[5],effects:{passive:{research_speed:25}},prerequisites:{tech_tier:5,deps:["AbsoluteArchive"]}},TotalAntiPxGen:{kind:"TotalAntiPxGen",size:{width:8,height:8},cost_px:121,min_colors_required:O[5],effects:{on_tick:{apx_rate:20}},prerequisites:{tech_tier:5,deps:["ChaosTower"]}},AntimatterGen:{kind:"AntimatterGen",size:{width:10,height:10},cost_px:225,min_colors_required:O[5],effects:{on_tick:{apx_rate:50,px_rate:50}},prerequisites:{tech_tier:5,deps:["TotalAntiPxGen"]}}},gt=Dt;function Me(l){return gt[l]}function Nt(l,e){const t=Me(l);if(e.resources.px<t.cost_px||e.palette.colors.size<t.min_colors_required||e.tech_level<t.prerequisites.tech_tier)return!1;for(const s of t.prerequisites.deps)if(!e.buildings.some(n=>n.template.kind===s))return!1;return!0}function Gt(l){const e=[];for(const[t,s]of Object.entries(gt))Nt(t,l)&&e.push(t);return e}function He(l){const e=Me(l),t={Base:"economy",GenPx:"economy",AdvGenPx:"economy",QuantumPxFactory:"economy",Storage:"economy",MegaStorage:"economy",CentralDepot:"economy",ColorFactory:"tech",PigmentFactory:"tech",AlchemyLab:"tech",ColossalColorLab:"tech",Science:"tech",Academy:"tech",GlobalInstitute:"tech",AbsoluteArchive:"tech",CentralAI:"tech",EXP_Mine:"tech",CrystalExpMine:"tech",PX2EXP:"utility",EXP2PX:"utility",AntiPxGen:"military",AntiPxLab:"military",ChaosTower:"military",TotalAntiPxGen:"military",AntimatterGen:"military",Board:"utility",WorldFortress:"military"},s={Base:"Foundation structure that unlocks other buildings",GenPx:"Generates pixels over time",Storage:"Increases pixel storage capacity",ColorFactory:"Adds new colors to your palette",Science:"Enables research and tech progression",EXP_Mine:"Generates experience points",PX2EXP:"Converts pixels to experience",EXP2PX:"Converts experience to pixels",AntiPxGen:"Generates anti-pixel for attacks",Board:"Post messages to regional board",AdvGenPx:"Advanced pixel generator (3x rate)",MegaStorage:"Large storage facility (5x capacity)",PigmentFactory:"Advanced color production (+3 colors)",Academy:"Accelerates research (2x speed)"};return{name:l.replace(/([A-Z])/g," $1").trim(),description:s[l]||"Advanced building",category:t[l]||"utility",tier:e.prerequisites.tech_tier}}function Xt(l){const e=l.slice(),t=He(e[3].selected_building);return e[15]=t,e}function st(l,e,t){const s=l.slice();s[16]=e[t];const i=He(s[16]);s[15]=i;const n=Me?Me(s[16]):null;return s[17]=n,s}function it(l){let e,t=l[2].length+"",s;return{c(){e=h("span"),s=Y(t),this.h()},l(i){e=f(i,"SPAN",{class:!0});var n=T(e);s=W(n,t),n.forEach(_),this.h()},h(){u(e,"class","absolute -top-1 -right-1 bg-green-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center")},m(i,n){G(i,e,n),o(e,s)},p(i,n){n&4&&t!==(t=i[2].length+"")&&ue(s,t)},d(i){i&&_(e)}}}function zt(l){let e,t="Map View";return{c(){e=h("span"),e.textContent=t,this.h()},l(s){e=f(s,"SPAN",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1pltd1t"&&(e.textContent=t),this.h()},h(){u(e,"class","text-gray-500")},m(s,i){G(s,e,i)},d(s){s&&_(e)}}}function Lt(l){let e,t="Pixel Mode";return{c(){e=h("span"),e.textContent=t,this.h()},l(s){e=f(s,"SPAN",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1510ku4"&&(e.textContent=t),this.h()},h(){u(e,"class","text-green-400")},m(s,i){G(s,e,i)},d(s){s&&_(e)}}}function nt(l){let e,t,s="Available Buildings",i,n;function r(d,b){return d[2].length===0?Rt:Ot}let a=r(l),k=a(l),c=l[0]&&l[0].tech_level<5&&ct();return{c(){e=h("div"),t=h("h3"),t.textContent=s,i=I(),k.c(),n=I(),c&&c.c(),this.h()},l(d){e=f(d,"DIV",{class:!0});var b=T(e);t=f(b,"H3",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-yx4q4"&&(t.textContent=s),i=q(b),k.l(b),n=q(b),c&&c.l(b),b.forEach(_),this.h()},h(){u(t,"class","text-sm font-semibold mb-3 text-gray-300"),u(e,"class","absolute top-full right-0 mt-2 game-panel p-3 min-w-72 max-h-96 overflow-y-auto z-30")},m(d,b){G(d,e,b),o(e,t),o(e,i),k.m(e,null),o(e,n),c&&c.m(e,null)},p(d,b){a===(a=r(d))&&k?k.p(d,b):(k.d(1),k=a(d),k&&(k.c(),k.m(e,n))),d[0]&&d[0].tech_level<5?c||(c=ct(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(d){d&&_(e),k.d(),c&&c.d()}}}function Ot(l){let e,t=lt(l[2]),s=[];for(let i=0;i<t.length;i+=1)s[i]=rt(st(l,t,i));return{c(){e=h("div");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=f(i,"DIV",{class:!0});var n=T(e);for(let r=0;r<s.length;r+=1)s[r].l(n);n.forEach(_),this.h()},h(){u(e,"class","grid gap-2")},m(i,n){G(i,e,n);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(i,n){if(n&1068){t=lt(i[2]);let r;for(r=0;r<t.length;r+=1){const a=st(i,t,r);s[r]?s[r].p(a,n):(s[r]=rt(a),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(i){i&&_(e),Ct(s,i)}}}function Rt(l){let e,t="No buildings available. Build a Base first!";return{c(){e=h("div"),e.textContent=t,this.h()},l(s){e=f(s,"DIV",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-559o5l"&&(e.textContent=t),this.h()},h(){u(e,"class","text-sm text-gray-500 text-center py-4")},m(s,i){G(s,e,i)},p:ie,d(s){s&&_(e)}}}function ot(l){let e,t,s=l[17].cost_px+"",i,n,r,a,k=l[17].size.width+"",c,d,b=l[17].size.height+"",A,w,g=l[17].min_colors_required>8&&at(l);return{c(){e=h("div"),t=h("span"),i=Y(s),n=Y(" PX"),r=I(),a=h("span"),c=Y(k),d=Y("×"),A=Y(b),w=I(),g&&g.c(),this.h()},l(p){e=f(p,"DIV",{class:!0});var x=T(e);t=f(x,"SPAN",{class:!0});var P=T(t);i=W(P,s),n=W(P," PX"),P.forEach(_),r=q(x),a=f(x,"SPAN",{class:!0});var v=T(a);c=W(v,k),d=W(v,"×"),A=W(v,b),v.forEach(_),w=q(x),g&&g.l(x),x.forEach(_),this.h()},h(){u(t,"class","px-display"),u(a,"class","text-gray-500"),u(e,"class","flex items-center justify-between mt-2 text-xs")},m(p,x){G(p,e,x),o(e,t),o(t,i),o(t,n),o(e,r),o(e,a),o(a,c),o(a,d),o(a,A),o(e,w),g&&g.m(e,null)},p(p,x){x&4&&s!==(s=p[17].cost_px+"")&&ue(i,s),x&4&&k!==(k=p[17].size.width+"")&&ue(c,k),x&4&&b!==(b=p[17].size.height+"")&&ue(A,b),p[17].min_colors_required>8?g?g.p(p,x):(g=at(p),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(p){p&&_(e),g&&g.d()}}}function at(l){let e,t=l[17].min_colors_required+"",s,i;return{c(){e=h("span"),s=Y(t),i=Y(" colors"),this.h()},l(n){e=f(n,"SPAN",{class:!0});var r=T(e);s=W(r,t),i=W(r," colors"),r.forEach(_),this.h()},h(){u(e,"class","text-purple-400")},m(n,r){G(n,e,r),o(e,s),o(e,i)},p(n,r){r&4&&t!==(t=n[17].min_colors_required+"")&&ue(s,t)},d(n){n&&_(e)}}}function rt(l){let e,t,s,i=l[10](l[16])+"",n,r,a,k,c,d=l[15].name+"",b,A,w,g,p=l[15].tier+"",x,P,v,m=l[15].description+"",C,E,N,ce,J,R=l[17]&&ot(l);function $(){return l[14](l[16])}return{c(){e=h("button"),t=h("div"),s=h("div"),n=Y(i),r=I(),a=h("div"),k=h("div"),c=h("h4"),b=Y(d),A=I(),w=h("div"),g=Y("T"),x=Y(p),P=I(),v=h("p"),C=Y(m),E=I(),R&&R.c(),N=I(),this.h()},l(X){e=f(X,"BUTTON",{class:!0});var K=T(e);t=f(K,"DIV",{class:!0});var ne=T(t);s=f(ne,"DIV",{class:!0});var z=T(s);n=W(z,i),z.forEach(_),r=q(ne),a=f(ne,"DIV",{class:!0});var H=T(a);k=f(H,"DIV",{class:!0});var oe=T(k);c=f(oe,"H4",{class:!0});var le=T(c);b=W(le,d),le.forEach(_),A=q(oe),w=f(oe,"DIV",{class:!0});var F=T(w);g=W(F,"T"),x=W(F,p),F.forEach(_),oe.forEach(_),P=q(H),v=f(H,"P",{class:!0});var ae=T(v);C=W(ae,m),ae.forEach(_),E=q(H),R&&R.l(H),H.forEach(_),ne.forEach(_),N=q(K),K.forEach(_),this.h()},h(){u(s,"class","text-2xl"),u(c,"class","font-medium text-sm text-white truncate"),u(w,"class","text-xs text-gray-400"),u(k,"class","flex items-center justify-between"),u(v,"class","text-xs text-gray-400 mt-1"),u(a,"class","flex-1 min-w-0"),u(t,"class","flex items-start gap-3"),u(e,"class","building-card text-left available"),re(e,"selected",l[3].selected_building===l[16])},m(X,K){G(X,e,K),o(e,t),o(t,s),o(s,n),o(t,r),o(t,a),o(a,k),o(k,c),o(c,b),o(k,A),o(k,w),o(w,g),o(w,x),o(a,P),o(a,v),o(v,C),o(a,E),R&&R.m(a,null),o(e,N),ce||(J=U(e,"click",$),ce=!0)},p(X,K){l=X,K&4&&i!==(i=l[10](l[16])+"")&&ue(n,i),K&4&&d!==(d=l[15].name+"")&&ue(b,d),K&4&&p!==(p=l[15].tier+"")&&ue(x,p),K&4&&m!==(m=l[15].description+"")&&ue(C,m),l[17]?R?R.p(l,K):(R=ot(l),R.c(),R.m(a,null)):R&&(R.d(1),R=null),K&12&&re(e,"selected",l[3].selected_building===l[16])},d(X){X&&_(e),R&&R.d(),ce=!1,J()}}}function ct(l){let e,t='<h4 class="text-xs font-semibold mb-2 text-gray-500">Next Tier Preview</h4> <div class="text-xs text-gray-600">Unlock more buildings by placing required structures and gaining colors.</div>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(s){e=f(s,"DIV",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1i7ixcy"&&(e.innerHTML=t),this.h()},h(){u(e,"class","mt-4 pt-3 border-t border-gray-600")},m(s,i){G(s,e,i)},d(s){s&&_(e)}}}function dt(l){let e;function t(r,a){if(r[3].selected_tool==="building"&&r[3].selected_building)return ut;if(r[3].selected_tool==="apx")return Ft;if(r[3].selected_tool==="inspect")return Vt}function s(r,a){return a===ut?Xt(r):r}let i=t(l),n=i&&i(s(l,i));return{c(){e=h("div"),n&&n.c(),this.h()},l(r){e=f(r,"DIV",{class:!0});var a=T(e);n&&n.l(a),a.forEach(_),this.h()},h(){u(e,"class","fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-900/90 px-3 py-1 rounded-full text-sm z-10 pointer-events-none")},m(r,a){G(r,e,a),n&&n.m(e,null)},p(r,a){i===(i=t(r))&&n?n.p(s(r,i),a):(n&&n.d(1),n=i&&i(s(r,i)),n&&(n.c(),n.m(e,null)))},d(r){r&&_(e),n&&n.d()}}}function Vt(l){let e;return{c(){e=Y("Inspection Mode")},l(t){e=W(t,"Inspection Mode")},m(t,s){G(t,e,s)},p:ie,d(t){t&&_(e)}}}function Ft(l){let e;return{c(){e=Y("APX Attack Mode")},l(t){e=W(t,"APX Attack Mode")},m(t,s){G(t,e,s)},p:ie,d(t){t&&_(e)}}}function ut(l){let e,t=l[15].name+"",s;return{c(){e=Y("Building: "),s=Y(t)},l(i){e=W(i,"Building: "),s=W(i,t)},m(i,n){G(i,e,n),G(i,s,n)},p(i,n){n&8&&t!==(t=i[15].name+"")&&ue(s,t)},d(i){i&&(_(e),_(s))}}}function Ut(l){let e,t,s,i,n,r=Ae("territory")+"",a,k,c,d,b=Ae("building")+"",A,w,g,p,x,P=Ae("apx")+"",v,m,C,E,N,ce=Ae("inspect")+"",J,R,$,X,K="Grid",ne,z,H="Allies",oe,le,F,ae,pe,he=Math.floor(l[3].zoom_level)+"",y,S,M,L,V,j,ge,Q=l[2].length>0&&it(l);function We(B,Z){return B[3].zoom_level>=14?Lt:zt}let Te=We(l),_e=Te(l),ee=l[1]&&l[3].selected_tool==="building"&&nt(l),te=l[3].selected_tool!=="territory"&&dt(l);return{c(){e=h("div"),t=h("div"),s=h("div"),i=h("button"),n=h("span"),a=Y(r),k=I(),c=h("button"),d=h("span"),A=Y(b),w=I(),Q&&Q.c(),g=I(),p=h("button"),x=h("span"),v=Y(P),C=I(),E=h("button"),N=h("span"),J=Y(ce),R=I(),$=h("div"),X=h("button"),X.textContent=K,ne=I(),z=h("button"),z.textContent=H,oe=I(),le=h("div"),F=h("div"),ae=h("span"),pe=Y("Z"),y=Y(he),S=I(),_e.c(),M=I(),ee&&ee.c(),L=I(),te&&te.c(),V=Ie(),this.h()},l(B){e=f(B,"DIV",{class:!0});var Z=T(e);t=f(Z,"DIV",{class:!0});var be=T(t);s=f(be,"DIV",{class:!0});var me=T(s);i=f(me,"BUTTON",{class:!0,title:!0,"aria-label":!0});var Ye=T(i);n=f(Ye,"SPAN",{class:!0});var je=T(n);a=W(je,r),je.forEach(_),Ye.forEach(_),k=q(me),c=f(me,"BUTTON",{class:!0,title:!0,"aria-label":!0});var Pe=T(c);d=f(Pe,"SPAN",{class:!0});var Ze=T(d);A=W(Ze,b),Ze.forEach(_),w=q(Pe),Q&&Q.l(Pe),Pe.forEach(_),g=q(me),p=f(me,"BUTTON",{class:!0,title:!0,"aria-label":!0});var Qe=T(p);x=f(Qe,"SPAN",{class:!0});var Ke=T(x);v=W(Ke,P),Ke.forEach(_),Qe.forEach(_),C=q(me),E=f(me,"BUTTON",{class:!0,title:!0,"aria-label":!0});var Je=T(E);N=f(Je,"SPAN",{class:!0});var $e=T(N);J=W($e,ce),$e.forEach(_),Je.forEach(_),me.forEach(_),R=q(be),$=f(be,"DIV",{class:!0});var Ee=T($);X=f(Ee,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),D(X)!=="svelte-258bha"&&(X.textContent=K),ne=q(Ee),z=f(Ee,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),D(z)!=="svelte-1z039ae"&&(z.textContent=H),Ee.forEach(_),oe=q(be),le=f(be,"DIV",{class:!0});var et=T(le);F=f(et,"DIV",{class:!0});var Se=T(F);ae=f(Se,"SPAN",{});var Xe=T(ae);pe=W(Xe,"Z"),y=W(Xe,he),Xe.forEach(_),S=q(Se),_e.l(Se),Se.forEach(_),et.forEach(_),be.forEach(_),M=q(Z),ee&&ee.l(Z),Z.forEach(_),L=q(B),te&&te.l(B),V=Ie(),this.h()},h(){u(n,"class","text-lg"),u(i,"class","game-button"),u(i,"title","Pixel Paint Tool (T) - Paint 1x1 pixels on the map"),u(i,"aria-label","Pixel painting tool"),re(i,"active",l[3].selected_tool==="territory"),u(d,"class","text-lg"),u(c,"class","game-button relative"),u(c,"title","Place Buildings (B)"),u(c,"aria-label","Building placement tool"),re(c,"active",l[3].selected_tool==="building"),u(x,"class","text-lg"),u(p,"class","game-button"),u(p,"title","APX Attack (A)"),u(p,"aria-label","APX attack tool"),p.disabled=m=!l[0]||l[0].resources.apx===0,re(p,"active",l[3].selected_tool==="apx"),u(N,"class","text-lg"),u(E,"class","game-button"),u(E,"title","Inspect Tiles (I)"),u(E,"aria-label","Tile inspection tool"),re(E,"active",l[3].selected_tool==="inspect"),u(s,"class","flex gap-1 border-r border-gray-600 pr-2"),u(X,"class","game-button text-sm px-2"),u(X,"title","Toggle Grid (G)"),re(X,"active",l[3].show_grid),u(z,"class","game-button text-sm px-2"),u(z,"title","Toggle Alliance View"),re(z,"active",l[3].show_alliances),u($,"class","flex gap-1 border-r border-gray-600 pr-2"),u(F,"class","flex flex-col text-xs leading-tight"),u(le,"class","flex items-center text-sm text-gray-400 px-2 border-l border-gray-600 pl-2"),u(t,"class","flex gap-2 game-panel p-2"),u(e,"class","building-menu-container relative svelte-np63j4")},m(B,Z){G(B,e,Z),o(e,t),o(t,s),o(s,i),o(i,n),o(n,a),o(s,k),o(s,c),o(c,d),o(d,A),o(c,w),Q&&Q.m(c,null),o(s,g),o(s,p),o(p,x),o(x,v),o(s,C),o(s,E),o(E,N),o(N,J),o(t,R),o(t,$),o($,X),o($,ne),o($,z),o(t,oe),o(t,le),o(le,F),o(F,ae),o(ae,pe),o(ae,y),o(F,S),_e.m(F,null),o(e,M),ee&&ee.m(e,null),G(B,L,Z),te&&te.m(B,Z),G(B,V,Z),j||(ge=[U(window,"click",l[9]),U(i,"click",l[11]),U(c,"click",l[6]),U(p,"click",l[12]),U(E,"click",l[13]),U(X,"click",l[7]),U(z,"click",l[8])],j=!0)},p(B,[Z]){Z&8&&re(i,"active",B[3].selected_tool==="territory"),B[2].length>0?Q?Q.p(B,Z):(Q=it(B),Q.c(),Q.m(c,null)):Q&&(Q.d(1),Q=null),Z&8&&re(c,"active",B[3].selected_tool==="building"),Z&1&&m!==(m=!B[0]||B[0].resources.apx===0)&&(p.disabled=m),Z&8&&re(p,"active",B[3].selected_tool==="apx"),Z&8&&re(E,"active",B[3].selected_tool==="inspect"),Z&8&&re(X,"active",B[3].show_grid),Z&8&&re(z,"active",B[3].show_alliances),Z&8&&he!==(he=Math.floor(B[3].zoom_level)+"")&&ue(y,he),Te!==(Te=We(B))&&(_e.d(1),_e=Te(B),_e&&(_e.c(),_e.m(F,null))),B[1]&&B[3].selected_tool==="building"?ee?ee.p(B,Z):(ee=nt(B),ee.c(),ee.m(e,null)):ee&&(ee.d(1),ee=null),B[3].selected_tool!=="territory"?te?te.p(B,Z):(te=dt(B),te.c(),te.m(V.parentNode,V)):te&&(te.d(1),te=null)},i:ie,o:ie,d(B){B&&(_(e),_(L),_(V)),Q&&Q.d(),_e.d(),ee&&ee.d(),te&&te.d(B),j=!1,ye(ge)}}}function Ae(l){switch(l){case"territory":return"✏️";case"building":return"🏗️";case"apx":return"💥";case"inspect":return"🔍";default:return"?"}}function Ht(l,e,t){let s,i;qe(l,de,v=>t(3,s=v)),qe(l,fe,v=>t(0,i=v));let n=!1,r=[];function a(v){ve.setSelectedTool(v),v!=="building"&&t(1,n=!1)}function k(v){ve.setSelectedBuilding(v),t(1,n=!1)}function c(){s.selected_tool==="building"?t(1,n=!n):(a("building"),t(1,n=!0))}function d(){ve.toggleGrid()}function b(){ve.toggleAlliances()}function A(v){v.target.closest(".building-menu-container")||t(1,n=!1)}function w(v){switch(He(v).category){case"economy":return"💰";case"military":return"⚔️";case"tech":return"🔬";case"utility":return"🔧";default:return"🏢"}}const g=()=>a("territory"),p=()=>a("apx"),x=()=>a("inspect"),P=v=>k(v);return l.$$.update=()=>{l.$$.dirty&1&&i&&t(2,r=Gt(i))},[i,n,r,s,a,k,c,d,b,A,w,g,p,x,P]}class Wt extends Be{constructor(e){super(),De(this,e,Ht,Ut,Ne,{})}}function ft(l){let e,t,s,i,n="Game Rules",r,a,k="✕",c,d,b=`<section><h3 class="font-semibold text-gray-200 mb-2">🎯 Objective</h3> <p class="text-gray-300">Control 25% of the world map or eliminate all opponents to achieve victory. 
            Build your pixel empire through strategic territory expansion and building construction.</p></section> <section><h3 class="font-semibold text-gray-200 mb-2">🗺️ Territory Control</h3> <ul class="text-gray-300 space-y-1 ml-4"><li>• Territory = grayscale pixels only</li> <li>• Buildings = colored pixels only</li> <li>• Cost = 1 PX per pixel placed</li> <li>• Cannot build on enemy territory</li></ul></section> <section><h3 class="font-semibold text-gray-200 mb-2">🏗️ Buildings &amp; Tech</h3> <ul class="text-gray-300 space-y-1 ml-4"><li>• Start with Base (unlocks all T1 buildings)</li> <li>• GenPx: Generates pixels over time</li> <li>• Storage: Increases pixel capacity</li> <li>• ColorFactory: Unlocks new colors</li> <li>• Science: Enables research progression</li> <li>• Higher tiers require more colors</li></ul></section> <section><h3 class="font-semibold text-gray-200 mb-2">💰 Resources</h3> <ul class="text-gray-300 space-y-1 ml-4"><li>• PX: Primary currency for all actions</li> <li>• EXP: Experience for tech advancement</li> <li>• APX: Anti-pixel for attacking enemies</li> <li>• Convert: 10 PX ⇄ 1 EXP ⇄ 8 PX</li></ul></section> <section><h3 class="font-semibold text-gray-200 mb-2">⚔️ Combat &amp; APX</h3> <ul class="text-gray-300 space-y-1 ml-4"><li>• APX attacks can erase enemy pixels</li> <li>• Different shapes: point, line, area, building</li> <li>• Success depends on enemy defenses</li> <li>• Cooldowns prevent spam attacks</li></ul></section> <section><h3 class="font-semibold text-gray-200 mb-2">🛡️ Anti-Griefing</h3> <ul class="text-gray-300 space-y-1 ml-4"><li>• Rate limits per region</li> <li>• Minimum distance between bases</li> <li>• APX cooldowns and diminishing returns</li> <li>• Progressive costs for expansion</li></ul></section>`,A,w,g,p="Got it!",x,P;return{c(){e=h("div"),t=h("div"),s=h("div"),i=h("h2"),i.textContent=n,r=I(),a=h("button"),a.textContent=k,c=I(),d=h("div"),d.innerHTML=b,A=I(),w=h("div"),g=h("button"),g.textContent=p,this.h()},l(v){e=f(v,"DIV",{class:!0});var m=T(e);t=f(m,"DIV",{class:!0});var C=T(t);s=f(C,"DIV",{class:!0});var E=T(s);i=f(E,"H2",{class:!0,"data-svelte-h":!0}),D(i)!=="svelte-ofnes0"&&(i.textContent=n),r=q(E),a=f(E,"BUTTON",{class:!0,"data-svelte-h":!0}),D(a)!=="svelte-xe32ie"&&(a.textContent=k),E.forEach(_),c=q(C),d=f(C,"DIV",{class:!0,"data-svelte-h":!0}),D(d)!=="svelte-1dogu1q"&&(d.innerHTML=b),A=q(C),w=f(C,"DIV",{class:!0});var N=T(w);g=f(N,"BUTTON",{class:!0,"data-svelte-h":!0}),D(g)!=="svelte-1jb6fz9"&&(g.textContent=p),N.forEach(_),C.forEach(_),m.forEach(_),this.h()},h(){u(i,"class","text-xl font-bold text-game-accent"),u(a,"class","text-gray-400 hover:text-white text-xl"),u(s,"class","flex items-center justify-between mb-4"),u(d,"class","space-y-4 text-sm max-h-96 overflow-y-auto"),u(g,"class","game-button"),u(w,"class","mt-6 text-center"),u(t,"class","modal-content"),u(e,"class","modal-overlay")},m(v,m){G(v,e,m),o(e,t),o(t,s),o(s,i),o(s,r),o(s,a),o(t,c),o(t,d),o(t,A),o(t,w),o(w,g),x||(P=[U(a,"click",l[4]),U(g,"click",l[4]),U(e,"click",l[6])],x=!0)},p:ie,d(v){v&&_(e),x=!1,ye(P)}}}function ht(l){let e,t,s,i,n="Keyboard Shortcuts",r,a,k="✕",c,d,b='<section><h3 class="font-semibold text-gray-200 mb-2">🎮 Game Controls</h3> <div class="grid grid-cols-2 gap-2 text-gray-300"><div><kbd class="svelte-1hy6qx4">T</kbd> Territory mode</div> <div><kbd class="svelte-1hy6qx4">B</kbd> Building mode</div> <div><kbd class="svelte-1hy6qx4">A</kbd> APX attack mode</div> <div><kbd class="svelte-1hy6qx4">I</kbd> Inspect mode</div> <div><kbd class="svelte-1hy6qx4">G</kbd> Toggle grid</div> <div><kbd class="svelte-1hy6qx4">Tab</kbd> Toggle sidebar</div> <div><kbd class="svelte-1hy6qx4">M</kbd> Toggle board/leaderboard</div> <div><kbd class="svelte-1hy6qx4">?</kbd> Show shortcuts</div></div></section> <section><h3 class="font-semibold text-gray-200 mb-2">🗺️ Map Controls</h3> <div class="grid grid-cols-2 gap-2 text-gray-300"><div><kbd class="svelte-1hy6qx4">Click</kbd> Place pixel/building</div> <div><kbd class="svelte-1hy6qx4">Right-click</kbd> Quick APX attack</div> <div><kbd class="svelte-1hy6qx4">Drag</kbd> Pan map</div> <div><kbd class="svelte-1hy6qx4">Scroll</kbd> Zoom in/out</div> <div><kbd class="svelte-1hy6qx4">Double-click</kbd> Zoom to location</div> <div><kbd class="svelte-1hy6qx4">Esc</kbd> Cancel action/close</div></div></section> <section><h3 class="font-semibold text-gray-200 mb-2">💬 Communication</h3> <div class="grid grid-cols-2 gap-2 text-gray-300"><div><kbd class="svelte-1hy6qx4">Enter</kbd> Send board message</div> <div><kbd class="svelte-1hy6qx4">Shift+Enter</kbd> New line in message</div></div></section> <section class="text-xs text-gray-500"><p>💡 Tip: Hold <kbd class="svelte-1hy6qx4">Shift</kbd> while clicking to place multiple pixels rapidly</p></section>',A,w,g,p="Close",x,P;return{c(){e=h("div"),t=h("div"),s=h("div"),i=h("h2"),i.textContent=n,r=I(),a=h("button"),a.textContent=k,c=I(),d=h("div"),d.innerHTML=b,A=I(),w=h("div"),g=h("button"),g.textContent=p,this.h()},l(v){e=f(v,"DIV",{class:!0});var m=T(e);t=f(m,"DIV",{class:!0});var C=T(t);s=f(C,"DIV",{class:!0});var E=T(s);i=f(E,"H2",{class:!0,"data-svelte-h":!0}),D(i)!=="svelte-4bn0f1"&&(i.textContent=n),r=q(E),a=f(E,"BUTTON",{class:!0,"data-svelte-h":!0}),D(a)!=="svelte-xe32ie"&&(a.textContent=k),E.forEach(_),c=q(C),d=f(C,"DIV",{class:!0,"data-svelte-h":!0}),D(d)!=="svelte-1u41sp"&&(d.innerHTML=b),A=q(C),w=f(C,"DIV",{class:!0});var N=T(w);g=f(N,"BUTTON",{class:!0,"data-svelte-h":!0}),D(g)!=="svelte-y1d4sv"&&(g.textContent=p),N.forEach(_),C.forEach(_),m.forEach(_),this.h()},h(){u(i,"class","text-xl font-bold text-game-accent"),u(a,"class","text-gray-400 hover:text-white text-xl"),u(s,"class","flex items-center justify-between mb-4"),u(d,"class","space-y-4 text-sm"),u(g,"class","game-button"),u(w,"class","mt-6 text-center"),u(t,"class","modal-content"),u(e,"class","modal-overlay")},m(v,m){G(v,e,m),o(e,t),o(t,s),o(s,i),o(s,r),o(s,a),o(t,c),o(t,d),o(t,A),o(t,w),o(w,g),x||(P=[U(a,"click",l[4]),U(g,"click",l[4]),U(e,"click",l[6])],x=!0)},p:ie,d(v){v&&_(e),x=!1,ye(P)}}}function pt(l){let e,t,s,i,n="Changelog",r,a,k="✕",c,d,b='<section><h3 class="font-semibold text-gray-200 mb-2">v1.0.0 - First Playable</h3> <ul class="text-gray-300 space-y-1 ml-4"><li>• Complete T1 building system</li> <li>• Real-time multiplayer pixel placement</li> <li>• MapLibre GL integration with OpenFreeMap</li> <li>• Resource generation and conversion</li> <li>• Basic APX attack system</li> <li>• Regional board messaging</li> <li>• Leaderboard and statistics</li> <li>• PWA support for mobile</li> <li>• Anti-griefing rate limiting</li> <li>• Keyboard shortcuts</li></ul></section> <section><h3 class="font-semibold text-gray-200 mb-2">🚧 Known Limitations</h3> <ul class="text-gray-300 space-y-1 ml-4"><li>• T2-T5 buildings are data stubs</li> <li>• Alliance system is basic</li> <li>• No persistent server state</li> <li>• Limited mobile optimization</li> <li>• Basic AI/NPC opponents</li></ul></section> <section><h3 class="font-semibold text-gray-200 mb-2">🔮 Planned Features</h3> <ul class="text-gray-300 space-y-1 ml-4"><li>• Full T2-T5 building implementation</li> <li>• Advanced alliance mechanics</li> <li>• Persistent world state</li> <li>• Mobile app version</li> <li>• Spectator mode</li> <li>• Custom game modes</li> <li>• Achievement system</li></ul></section>',A,w,g,p="Close",x,P;return{c(){e=h("div"),t=h("div"),s=h("div"),i=h("h2"),i.textContent=n,r=I(),a=h("button"),a.textContent=k,c=I(),d=h("div"),d.innerHTML=b,A=I(),w=h("div"),g=h("button"),g.textContent=p,this.h()},l(v){e=f(v,"DIV",{class:!0});var m=T(e);t=f(m,"DIV",{class:!0});var C=T(t);s=f(C,"DIV",{class:!0});var E=T(s);i=f(E,"H2",{class:!0,"data-svelte-h":!0}),D(i)!=="svelte-1bqdqlx"&&(i.textContent=n),r=q(E),a=f(E,"BUTTON",{class:!0,"data-svelte-h":!0}),D(a)!=="svelte-xe32ie"&&(a.textContent=k),E.forEach(_),c=q(C),d=f(C,"DIV",{class:!0,"data-svelte-h":!0}),D(d)!=="svelte-9jxx1"&&(d.innerHTML=b),A=q(C),w=f(C,"DIV",{class:!0});var N=T(w);g=f(N,"BUTTON",{class:!0,"data-svelte-h":!0}),D(g)!=="svelte-y1d4sv"&&(g.textContent=p),N.forEach(_),C.forEach(_),m.forEach(_),this.h()},h(){u(i,"class","text-xl font-bold text-game-accent"),u(a,"class","text-gray-400 hover:text-white text-xl"),u(s,"class","flex items-center justify-between mb-4"),u(d,"class","space-y-4 text-sm max-h-96 overflow-y-auto"),u(g,"class","game-button"),u(w,"class","mt-6 text-center"),u(t,"class","modal-content"),u(e,"class","modal-overlay")},m(v,m){G(v,e,m),o(e,t),o(t,s),o(s,i),o(s,r),o(s,a),o(t,c),o(t,d),o(t,A),o(t,w),o(w,g),x||(P=[U(a,"click",l[4]),U(g,"click",l[4]),U(e,"click",l[6])],x=!0)},p:ie,d(v){v&&_(e),x=!1,ye(P)}}}function _t(l){let e,t,s,i,n="Settings",r,a,k="✕",c,d,b,A='<h3 class="font-semibold text-gray-200 mb-2">🎨 Display</h3> <div class="space-y-2"><label class="flex items-center gap-2"><input type="checkbox" class="rounded"/> <span class="text-gray-300">Show grid by default</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded"/> <span class="text-gray-300">Show alliance territories</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded"/> <span class="text-gray-300">Smooth zoom transitions</span></label></div>',w,g,p='<h3 class="font-semibold text-gray-200 mb-2">🔊 Audio</h3> <div class="space-y-2"><label class="flex items-center gap-2"><input type="checkbox" class="rounded"/> <span class="text-gray-300">Sound effects</span></label> <label class="flex items-center gap-2"><input type="checkbox" class="rounded"/> <span class="text-gray-300">Notification sounds</span></label></div>',x,P,v,m="🌐 Language",C,E,N,ce="English",J,R="Polski",$,X,K='<h3 class="font-semibold text-gray-200 mb-2">💾 Data</h3> <div class="space-y-2"><button class="game-button w-full">Export Game Data</button> <button class="game-button w-full">Clear Local Cache</button></div>',ne,z,H,oe="Save",le,F,ae="Cancel",pe,he;return{c(){e=h("div"),t=h("div"),s=h("div"),i=h("h2"),i.textContent=n,r=I(),a=h("button"),a.textContent=k,c=I(),d=h("div"),b=h("section"),b.innerHTML=A,w=I(),g=h("section"),g.innerHTML=p,x=I(),P=h("section"),v=h("h3"),v.textContent=m,C=I(),E=h("select"),N=h("option"),N.textContent=ce,J=h("option"),J.textContent=R,$=I(),X=h("section"),X.innerHTML=K,ne=I(),z=h("div"),H=h("button"),H.textContent=oe,le=I(),F=h("button"),F.textContent=ae,this.h()},l(y){e=f(y,"DIV",{class:!0});var S=T(e);t=f(S,"DIV",{class:!0});var M=T(t);s=f(M,"DIV",{class:!0});var L=T(s);i=f(L,"H2",{class:!0,"data-svelte-h":!0}),D(i)!=="svelte-d7qzcw"&&(i.textContent=n),r=q(L),a=f(L,"BUTTON",{class:!0,"data-svelte-h":!0}),D(a)!=="svelte-xe32ie"&&(a.textContent=k),L.forEach(_),c=q(M),d=f(M,"DIV",{class:!0});var V=T(d);b=f(V,"SECTION",{"data-svelte-h":!0}),D(b)!=="svelte-1cc2n3y"&&(b.innerHTML=A),w=q(V),g=f(V,"SECTION",{"data-svelte-h":!0}),D(g)!=="svelte-qdmh8j"&&(g.innerHTML=p),x=q(V),P=f(V,"SECTION",{});var j=T(P);v=f(j,"H3",{class:!0,"data-svelte-h":!0}),D(v)!=="svelte-1gv2zu6"&&(v.textContent=m),C=q(j),E=f(j,"SELECT",{class:!0});var ge=T(E);N=f(ge,"OPTION",{"data-svelte-h":!0}),D(N)!=="svelte-1bjraht"&&(N.textContent=ce),J=f(ge,"OPTION",{"data-svelte-h":!0}),D(J)!=="svelte-1whlh0q"&&(J.textContent=R),ge.forEach(_),j.forEach(_),$=q(V),X=f(V,"SECTION",{"data-svelte-h":!0}),D(X)!=="svelte-ogkg3p"&&(X.innerHTML=K),V.forEach(_),ne=q(M),z=f(M,"DIV",{class:!0});var Q=T(z);H=f(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),D(H)!=="svelte-uu8v6y"&&(H.textContent=oe),le=q(Q),F=f(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),D(F)!=="svelte-1ihdg0x"&&(F.textContent=ae),Q.forEach(_),M.forEach(_),S.forEach(_),this.h()},h(){u(i,"class","text-xl font-bold text-game-accent"),u(a,"class","text-gray-400 hover:text-white text-xl"),u(s,"class","flex items-center justify-between mb-4"),u(v,"class","font-semibold text-gray-200 mb-2"),N.__value="en",tt(N,N.__value),J.__value="pl",tt(J,J.__value),u(E,"class","bg-gray-700 text-white rounded p-2 w-full"),u(d,"class","space-y-4 text-sm"),u(H,"class","game-button"),u(F,"class","game-button"),u(z,"class","mt-6 text-center space-x-2"),u(t,"class","modal-content"),u(e,"class","modal-overlay")},m(y,S){G(y,e,S),o(e,t),o(t,s),o(s,i),o(s,r),o(s,a),o(t,c),o(t,d),o(d,b),o(d,w),o(d,g),o(d,x),o(d,P),o(P,v),o(P,C),o(P,E),o(E,N),o(E,J),o(d,$),o(d,X),o(t,ne),o(t,z),o(z,H),o(z,le),o(z,F),pe||(he=[U(a,"click",l[4]),U(H,"click",l[4]),U(F,"click",l[4]),U(e,"click",l[6])],pe=!0)},p:ie,d(y){y&&_(e),pe=!1,ye(he)}}}function Yt(l){let e,t,s,i="❓",n,r,a="📋",k,c,d,b,A,w,g,p=l[0]&&ft(l),x=l[2]&&ht(l),P=l[1]&&pt(l),v=l[3]&&_t(l);return{c(){e=h("div"),t=h("div"),s=h("button"),s.textContent=i,n=I(),r=h("button"),r.textContent=a,k=I(),p&&p.c(),c=I(),x&&x.c(),d=I(),P&&P.c(),b=I(),v&&v.c(),A=Ie(),this.h()},l(m){e=f(m,"DIV",{class:!0});var C=T(e);t=f(C,"DIV",{class:!0});var E=T(t);s=f(E,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),D(s)!=="svelte-1vzedhi"&&(s.textContent=i),n=q(E),r=f(E,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),D(r)!=="svelte-vlxsqi"&&(r.textContent=a),E.forEach(_),C.forEach(_),k=q(m),p&&p.l(m),c=q(m),x&&x.l(m),d=q(m),P&&P.l(m),b=q(m),v&&v.l(m),A=Ie(),this.h()},h(){u(s,"class","game-button p-3 rounded-full"),u(s,"title","Keyboard shortcuts (?)"),u(r,"class","game-button p-3 rounded-full"),u(r,"title","Game rules"),u(t,"class","flex gap-2"),u(e,"class","fixed bottom-4 right-20 z-30")},m(m,C){G(m,e,C),o(e,t),o(t,s),o(t,n),o(t,r),G(m,k,C),p&&p.m(m,C),G(m,c,C),x&&x.m(m,C),G(m,d,C),P&&P.m(m,C),G(m,b,C),v&&v.m(m,C),G(m,A,C),w||(g=[U(window,"keydown",l[5]),U(s,"click",l[11]),U(r,"click",l[12])],w=!0)},p(m,[C]){m[0]?p?p.p(m,C):(p=ft(m),p.c(),p.m(c.parentNode,c)):p&&(p.d(1),p=null),m[2]?x?x.p(m,C):(x=ht(m),x.c(),x.m(d.parentNode,d)):x&&(x.d(1),x=null),m[1]?P?P.p(m,C):(P=pt(m),P.c(),P.m(b.parentNode,b)):P&&(P.d(1),P=null),m[3]?v?v.p(m,C):(v=_t(m),v.c(),v.m(A.parentNode,A)):v&&(v.d(1),v=null)},i:ie,o:ie,d(m){m&&(_(e),_(k),_(c),_(d),_(b),_(A)),p&&p.d(m),x&&x.d(m),P&&P.d(m),v&&v.d(m),w=!1,ye(g)}}}function jt(l,e,t){let s=!1,i=!1,n=!1,r=!1;Tt();function a(){t(0,s=!1),t(1,i=!1),t(2,n=!1),t(3,r=!1)}function k(x){x.key==="Escape"&&a(),x.key==="?"&&(x.preventDefault(),t(2,n=!0))}function c(x){x.target===x.currentTarget&&a()}function d(){t(0,s=!0)}function b(){t(1,i=!0)}function A(){t(2,n=!0)}function w(){t(3,r=!0)}return[s,i,n,r,a,k,c,d,b,A,w,()=>t(2,n=!0),()=>t(0,s=!0)]}class Zt extends Be{constructor(e){super(),De(this,e,jt,Yt,Ne,{openRules:7,openChangelog:8,openShortcuts:9,openSettings:10})}get openRules(){return this.$$.ctx[7]}get openChangelog(){return this.$$.ctx[8]}get openShortcuts(){return this.$$.ctx[9]}get openSettings(){return this.$$.ctx[10]}}function Qt(l){let e,t,s,i,n,r,a,k;return t=new Wt({}),n=new Bt({}),a=new Zt({}),{c(){e=h("div"),Fe(t.$$.fragment),s=I(),i=h("div"),Fe(n.$$.fragment),r=I(),Fe(a.$$.fragment),this.h()},l(c){e=f(c,"DIV",{class:!0});var d=T(e);Ve(t.$$.fragment,d),s=q(d),i=f(d,"DIV",{class:!0});var b=T(i);Ve(n.$$.fragment,b),b.forEach(_),d.forEach(_),r=q(c),Ve(a.$$.fragment,c),this.h()},h(){u(i,"class","flex-1 relative"),u(e,"class","h-screen w-screen overflow-hidden bg-game-bg flex")},m(c,d){G(c,e,d),Re(t,e,null),o(e,s),o(e,i),Re(n,i,null),G(c,r,d),Re(a,c,d),k=!0},p:ie,i(c){k||(Oe(t.$$.fragment,c),Oe(n.$$.fragment,c),Oe(a.$$.fragment,c),k=!0)},o(c){Le(t.$$.fragment,c),Le(n.$$.fragment,c),Le(a.$$.fragment,c),k=!1},d(c){c&&(_(e),_(r)),ze(t),ze(n),ze(a,c)}}}function Kt(l,e,t){let{params:s={}}=e;return l.$$set=i=>{"params"in i&&t(0,s=i.params)},[s]}class sl extends Be{constructor(e){super(),De(this,e,Kt,Qt,Ne,{params:0})}}export{sl as component};
